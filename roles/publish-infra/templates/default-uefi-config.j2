set default="0"

function load_video {
  insmod efi_gop
  insmod efi_uga
  insmod video_bochs
  insmod video_cirrus
  insmod all_video
}

load_video
set gfxpayload=keep
insmod gzio
insmod part_gpt
insmod ext2
rmmod tpm

set timeout=86400
### END /etc/grub.d/00_header ###

#search --no-floppy --set=root -l 'RHEL-7.4 Server.x86_64'

### Student and instructor fX and destroy generated by Makefile ###
menuentry 'Install SNO' --class fedora --class gnu-linux --class gnu --class os {
        linuxefi {{ images_url }}/rhcos-{{ rhcos_ver }}-x86_64-live-kernel-x86_64 ip={{ node.ip }}::172.25.254.254:255.255.255.0:{{ node.name }}.{{ node.cluster }}.ilt.example.com:ens3:none:172.25.254.254 rd.neednet=1 console=tty0 initrd={{ images_url }}/rhcos-{{ rhcos_ver }}-x86_64-live-initramfs.x86_64.img,{{ images_url }}/rhcos-{{ rhcos_ver }}-x86_64-live-rootfs.x86_64.img ignition.config.url={{ ignitions_url }}/{{ node.cluster }}-{{ node.name }}.ign random.trust_cpu=on ignition.firstboot ignition.platform.id=metal
        initrdefi initrd.img
}
menuentry 'destroy - Destroy ALL ATTACHED DRIVES (except RHTINST)' --class fedora --class gnu-linux --class gnu --class os {
        insmod gzio
        insmod part_gpt
        insmod xfs
        set root='hd0,gpt2'
        linuxefi vmlinuz inst.ks=http://172.25.254.250/ks/destroy.ks inst.repo=http://172.25.254.250/rhel9.1/x86_64/dvd
        initrdefi initrd.img
}
